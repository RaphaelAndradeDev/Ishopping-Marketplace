function getResult(n,t){$.ajax({url:"/Home/GetResult",contentType:"application/html; charset=utf-8",data:{lat:n,lon:t},type:"GET",dataType:"html"}).success(function(n){$("#image").html(n)}).error(function(){})}function setCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+";"+u+";path=/"}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function loadLatLon(){var n=getCookie("lat"),t=getCookie("lon");n!=""&&t!=""?getResult(n,t):getThisLatLong()}function getThisLatLong(){function n(){}function t(n){var t=n.coords.latitude.toPrecision(9),i=n.coords.longitude.toPrecision(9);t!=""&&t!=null&&(setCookie("lat",t,365),setCookie("lon",i,365),getResult(t,i))}var i=document.getElementById("mapa");navigator.geolocation.getCurrentPosition(t,n)}function maplocation(n,t,i){this.lat=n;this.lon=t;this.name=i}function addMarker(n,t,i){var r=new maplocation(n,t,i);markers.push(r)}function inicializemap(){var t=getCookie("lat"),i=getCookie("lon"),f=new google.maps.MarkerImage("../../Componentes/Professional/Patros/images/marker.png",new google.maps.Size(84,56),new google.maps.Point(0,0),new google.maps.Point(42,56)),e=new google.maps.LatLng(t,i),o={backgroundColor:"#ffffff",zoom:15,disableDefaultUI:!0,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!0,draggable:!0,zoomControl:!0,disableDoubleClickZoom:!0,mapTypeControl:!1},r,n,u;for(map=new google.maps.Map(document.getElementById("map-canvas-holder"),o),r=new google.maps.LatLng(t,i),marker=new google.maps.Marker({position:r,raiseOnDrag:!1,icon:f,map:map,draggable:!1,title:"Eu"}),n=0;n<markers.length;n++)u=new google.maps.LatLng(markers[n].lat,markers[n].lon),marker=new google.maps.Marker({position:u,raiseOnDrag:!1,map:map,title:markers[n].name});google.maps.event.addListener(map,"zoom_changed",function(){var n=map.getCenter();google.maps.event.trigger(map,"resize");map.setCenter(n)})}$(document).ready(function(){loadLatLon()});$(window).on("load",function(){$(".title").each(function(){var n=$(this).data("lat"),t=$(this).data("lon"),i=$(this).data("title");addMarker(n,t,i)});inicializemap()});var markers=[];